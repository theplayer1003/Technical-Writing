# 데이터 모델링과 정규화

## 개요
데이터 모델링은 현실 세계의 비즈니스 요구사항을 추상화하여, 저장할 논리적인 구조를 정의하는 과정이다. 잘 설계된 데이터 모델은 데이터 중복을 줄이고, 데이터의 일관성과 무결성을 보장하여 시스템의 신뢰도를 높이는 기반이 된다.

정규화는 데이터의 중복을 최소화하고 무결성을 보장하기 위해 정해진 규칙에 따라 테이블을 분해하는 방법이다.
정규화를 거치지 않을 경우 `INSERT`, `UPDATE`, `DELETE` 등의 데이터 조작 시 이상 현상이 발생한다.

## 1. 데이터 모델의 3요소
### 개체(Entity)
- **정의**
저장하고자 하는 데이터의 집합이다. 물리적 사물 뿐만 아니라 개념적인 사안도 대상이 된다.
- **예시**
`Member` 회원, `Article` 게시글, `Order` 주문, `Enrollment` 수강신청 등이 엔티티가 될 수 있다.
보통 명사로 표현이 되며 DB 의 `Table` 로 구현된다.

### 속성(Attribute)
- **정의**
개체의 구체적인 정보 항목이다. 고유한 성질이나 특징을 나타내는 최소 데이터 단위이다.
- **예시**
`Member`: `id`, `name`, `email` 등의 속성을 가질 수 있다.
`Article`: `title`, `text` 등의 속성을 가질 수 있다.
`Order`: `orderId`, `productId`, `orderDate` 등의 속성을 가질 수 있다.

### 관계(Relationship)
- **정의**
개체와 개체 사이의 논리적인 연관성을 나타낸다. RDBMS 에서는 이를 외래 키(Foreign Key) 로 표현할 수 있다.
- **예시**
`Member` 가 여러 개의 `Article` 을 작성할 수 있다.
`Member` 는 하나의 `Member_Info` 를 가질 수 있다.

## 2. Entity-Relationship Diagram
엔티티와 관계를 표준화된 표기법으로 시각화한 설계도이다.
관계의 유형(Cardinality)을 표현하며 다음 세 가지 형태를 가진다.

- **1:1, One-to-One 관계**, 하나의 회원은 하나의 회원정보를 가진다, `Member` <-> `Member_Info`
- **1:N, One-to-Many 관계**, 하나의 회원은 여러 게시글을 가질 수 있다, `Member` <-> `Article`
- **N:M, Many-to-Many 관계**, N개의 학생은 M개의 과목을 가질 수 있다

N:M 관계는 RDBMS 에 직접 표현이 불가능하다. 연결 테이블(Junction Table) 의 형태로 표현해줘야 한다.
`Student` <-> `Course`, 학생은 여러 과목의 수강생을 가질 수 있고 과목은 여러 명의 수강생을 가질 수 있다.
따라서, `Enrollment` 테이블을 만들어서 `Student` 테이블과 `Course` 테이블을 FK 로 참조해 표현할 수 있다.

## 3. 정규화

### 제1정규형, 원자성 확보
테이블의 모든 열이 원자적인 값을 가져야 한다.

| ID  | 이름  | 취미              |
| --- | --- | --------------- |
| 1   | 포비  | bowling, coding |
포비의 취미에 원자적이지 못한 값이 들어있다.

| ID  | 취미      |
| --- | ------- |
| 1   | bowling |
| 1   | coding  |
취미를 별도의 테이블로 분리해서 1:N 관계를 연결한다.

### 제2정규형, 부분 함수 종속 제거
**테이블의 기본 키가 두 개 이상인 복합키의 경우,**
테이블의 모든 속성은 기본 키 전체에 종속되어야 하며, 기본 키의 일부에만 종속되어서는 안된다.

| 학생ID(PK) | 과목ID(PK) | 성적  | 학생명 |
| -------- | -------- | --- | --- |
| 101      | Java     | A   | 포비  |
| 101      | DB       | C   | 포비  |
성적 정보를 알려면 학생 ID(누구의 성적인지), 과목ID(어떤 과목의 성적인지) 모두 알아야 한다.
반면 학생명을 알려면 학생ID 만 알면 된다. 과목ID 와는 관련이 없다.
이로 인해 '포비' 라는 데이터가 과목 수만큼 중복 저장되는 문제가 발생한다.

| 학생ID(PK) | 학생명 |
| -------- | --- |
| 101      | 포비  |

| 학생ID(PK) | 과목ID(PK) | 성적  |
| -------- | -------- | --- |
| 101      | Java     | A   |
| 101      | DB       | C   |
위 두 테이블로 분리하여 제2정규형을 만족시킨다.

### 제3정규형, 이행적 함수 종속 제거
기본 키가 아닌 모든 속성 간에는 서로 종속 관계가 없어야 한다.

| 학생ID(PK) | 학생명 | 학과명 | 학과사무실_번호 |
| -------- | --- | --- | -------- |
| 101      | 포비  | 컴공  | 02-1234  |
| 102      | 제임스 | 컴공  | 02-1234  |
학생ID 가 정해지면 학과명도 따라 정해진다.
학과명이 정해지면 학과사무실_번호도 따라 정해진다.
즉, 학생ID 가 정해지면 학과사무실_번호도 정해진다고 할수 있으며, 이것이 이행적 종속이다.
학과사무실_번호가 기본키가 아닌 다른 속성에 종속된 것이다.

| 학생ID(PK) | 학생명 | 학과ID(FK) |
| -------- | --- | -------- |
| 101      | 포비  | 1        |
| 102      | 제임스 | 1        |

| 학과ID(PK) | 학과명 | 학과사무실_번호 |
| -------- | --- | -------- |
| 1        | 컴공  | 02-1234  |
위 두 테이블로 분리하여 제3정규형을 만족시킨다.